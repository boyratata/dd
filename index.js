(function(l,r,a,d,o,_,g,u){"use strict";const{FormSwitchRow:F,FormIcon:I}=_.Forms,{ScrollView:S}=a.ReactNative;o.storage.skipSelf??=!1,o.storage.skipBots??=!0;const v=()=>(u.useProxy(o.storage),React.createElement(S,null,React.createElement(F,{label:"Skip your own edits",leading:React.createElement(I,{source:g.getAssetIDByName("ic_profile")}),value:o.storage.skipSelf,onValueChange:v=>o.storage.skipSelf=v}),React.createElement(F,{label:"Skip bot edits",leading:React.createElement(I,{source:g.getAssetIDByName("ic_bot")}),value:o.storage.skipBots,onValueChange:v=>o.storage.skipBots=v})));const n=[],c=r.findByProps("_channelMessages"),f=r.findByProps("sendBotMessage"),i=r.findByProps("updateMessageRecord","createMessageRecord"),E=r.findByName("MessageRecord",!1),row=r.findByName("RowManager");n.push(d.before("dispatch",a.FluxDispatcher,([t])=>{if(t.type==="MESSAGE_UPDATE"){const old=c.get(t.channelId)?.get(t.message.id);if(!old||old.content===t.message.content)return;if(o.storage.skipBots&&old.author?.bot)return;if(o.storage.skipSelf&&old.author?.id===a.getCurrentUser().id)return;const name=old.author?.globalName||old.author?.username||"Unknown";f.sendBotMessage(t.channelId,`**[edited]** ${name}: ${old.content}`)}}));const m=()=>n.forEach(x=>x());return l.onUnload=m,l.settings=v,l})(_,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui.components,vendetta.ui.assets,vendetta.storage);
